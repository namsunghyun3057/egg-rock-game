<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Threshold: ê³„ë€ìœ¼ë¡œ ë°”ìœ„ ì¹˜ê¸°</title>
    <style>
        /* [ìŠ¤íƒ€ì¼] ì „ì²´ ë°°ê²½ ë° ë ˆì´ì•„ì›ƒ */
        body {
            background-color: #1a1a1a;
            color: #eee;
            font-family: 'Pretendard', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        h1 { margin: 0 0 10px 0; font-size: 2rem; }
        .sub-text { color: #888; margin-bottom: 20px; font-size: 0.9rem; }

        /* [ê²Œì„ ìŠ¤í…Œì´ì§€] */
        #game-stage {
            position: relative;
            width: 800px;
            height: 500px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* ë°”ìœ„ ì´ë¯¸ì§€ */
        #rock-image {
            width: 400px;
            height: auto;
            object-fit: contain;
            z-index: 10;
            transition: transform 0.1s;
        }

        /* [ìˆ˜ì •ë¨] ë‚ ì•„ê°€ëŠ” ê³„ë€ í¬ê¸° í™•ëŒ€ */
        .flying-egg {
            position: absolute;
            width: 100px; /* ê¸°ì¡´ 40px -> 100pxë¡œ í™•ëŒ€ (ì™•ë€!) */
            height: auto;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%) rotate(0deg);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 20;
            pointer-events: none;
        }

        /* [ì• ë‹ˆë©”ì´ì…˜] ë°”ìœ„ í”ë“¤ë¦¼ */
        .shake { animation: shake-ani 0.2s linear; }
        @keyframes shake-ani {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(-5px, 2px) rotate(-1deg); }
            50% { transform: translate(5px, -2px) rotate(1deg); }
            75% { transform: translate(-3px, 1px) rotate(0deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }

        /* [UI] í•˜ë‹¨ ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        #ui-panel {
            margin-top: 20px;
            text-align: center;
            z-index: 30;
        }

        #counter { font-size: 1.5rem; font-weight: bold; margin-bottom: 15px; }
        .count-highlight { color: #f4d03f; }

        /* [ìˆ˜ì •ë¨] ë²„íŠ¼ ê³„ë€ í¬ê¸° í™•ëŒ€ */
        #throw-btn {
            background: none;
            border: none;
            cursor: pointer;
            transition: transform 0.1s;
        }
        #throw-btn img {
            width: 100px; /* ê¸°ì¡´ 60px -> 100pxë¡œ í™•ëŒ€ */
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.2));
        }
        #throw-btn:active img { transform: scale(0.9); }
        #throw-btn:hover img { filter: drop-shadow(0 0 15px rgba(244, 208, 63, 0.6)); }

        /* ê²Œì„ ì¢…ë£Œ ì‹œ ìŠ¤íƒ€ì¼ */
        .disabled { filter: grayscale(100%); pointer-events: none; opacity: 0.5; }
        .success-msg { color: #4CAF50; font-size: 1.2rem; font-weight: bold; margin-top: 10px; animation: pop-in 0.5s; }
        
        @keyframes pop-in {
            0% { opacity: 0; transform: scale(0.5); }
            100% { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body>

    <h1></h1>
    <p class="sub-text">"ê³„ë€ì„ í´ë¦­í•´ ë°”ìœ„ë¥¼ ê¹¨ëœ¨ë¦¬ì„¸ìš”."</p>

    <div id="game-stage">
        <img id="rock-image" src="rock.png" alt="ë°”ìœ„">
    </div>

    <div id="ui-panel">
        <div id="counter">ë˜ì§„ íšŸìˆ˜: <span id="count-num" class="count-highlight">0</span></div>
        
        <button id="throw-btn" onclick="throwEgg()">
            <img src="egg.png" alt="ê³„ë€ ë˜ì§€ê¸°">
        </button>
        <div id="result-msg"></div>
    </div>

    <script>
        let count = 0;
        let targetCount = 0;
        let isGameClear = false;

        const rockElem = document.getElementById('rock-image');
        const countElem = document.getElementById('count-num');
        const stageElem = document.getElementById('game-stage');
        const throwBtn = document.getElementById('throw-btn');
        const resultMsg = document.getElementById('result-msg');

        function init() {
            targetCount = Math.floor(Math.random() * (52 - 33 + 1)) + 33;
            console.log("ëª©í‘œ íšŸìˆ˜(Cheat):", targetCount);
        }
        init();

        function throwEgg() {
            if (isGameClear) return;

            const flyingEgg = document.createElement('img');
            flyingEgg.src = 'egg.png';
            flyingEgg.className = 'flying-egg';
            stageElem.appendChild(flyingEgg);

            setTimeout(() => {
                // ë°”ìœ„ìª½ìœ¼ë¡œ ë‚ ì•„ê°€ë©´ì„œ ì‘ì•„ì§€ëŠ” ë¹„ìœ¨ ì¡°ì •
                // scale(0.5) -> scale(0.6)ìœ¼ë¡œ ì‚´ì§ ë” í¬ê²Œ ë³´ì´ê²Œ ì¡°ì •í•¨
                flyingEgg.style.bottom = '250px'; 
                flyingEgg.style.transform = 'translateX(-50%) scale(0.6) rotate(360deg)'; 
                flyingEgg.style.opacity = '1';
            }, 10);

            setTimeout(() => {
                flyingEgg.remove();
                hitRock();
            }, 500); 
        }

        function hitRock() {
            count++;
            countElem.innerText = count;

            rockElem.classList.remove('shake');
            void rockElem.offsetWidth; 
            rockElem.classList.add('shake');

            if (count >= targetCount) {
                gameWin();
            }
        }

        function gameWin() {
            isGameClear = true;
            rockElem.src = 'rock_broken.png';
            rockElem.style.transform = 'scale(1.1)'; 
            throwBtn.classList.add('disabled');
            resultMsg.innerHTML = "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! " + count + "ë²ˆ ì‹œë„ ëì— ë°”ìœ„ë¥¼ ì´ê²¼ìŠµë‹ˆë‹¤.";
            resultMsg.className = "success-msg";
        }
    </script>
</body>
</html>